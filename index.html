<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Malla Curricular - Licenciatura en Turismo en Línea</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Variables CSS para colores */
        :root {
            --bg-page: #F7F7F7; /* Tonalidad neutra suave para el fondo de la página */

            /* Paletas de Unidades */
            --unit-pre-bg: #E1F3FB;
            --unit-pre-title: #1AB4E8;
            --unit-basica-bg: #E6F9E8;
            --unit-basica-title: #1ACB6C;
            --unit-profesional-bg: #FFFBEB;
            --unit-profesional-title: #FFD150;
            --unit-titulacion-bg: #FFEAEA;
            --unit-titulacion-title: #FF9292;

            /* Paletas de Semestres */
            --sem-pre-bg: #E0F7FA; --sem-pre-title: #008BA3;
            --sem-1-bg: #E8F5E9; --sem-1-title: #1B5E20;
            --sem-2-bg: #FFF3E0; --sem-2-title: #EF6C00;
            --sem-3-bg: #F3E5F5; --sem-3-title: #6A1B9A;
            --sem-4-bg: #FCE4EC; --sem-4-title: #AD1457;
            --sem-5-bg: #FFFDE7; --sem-5-title: #FBC02D;
            --sem-6-bg: #FFEBEE; --sem-6-title: #C62828;
            --sem-7-bg: #E8F5E9; --sem-7-title: #1B5E20;
            --sem-8-bg: #E3F2FD; --sem-8-title: #0D47A1;
            --sem-9-bg: #FAFAFA; --sem-9-title: #424242;

            /* Paletas de Módulos */
            --module-bg-soft: #F7F7F7; /* Fondo general de módulos */
            --module-ingles-bg: #E0F7FA;
            --module-ingles-title: #006064;
            --module-computacion-bg: #F3E5F5;
            --module-computacion-title: #6A1B9A;

            /* Colores de Materias/Módulos (ejemplos, se usan dinámicamente) */
            --subject-color-1: #E0F7FA;
            --subject-color-2: #B2EBF2;
            --subject-color-3: #80DEEA;
            --subject-color-4: #4DD0E1;
            --subject-color-5: #26C6DA;
            --subject-color-6: #00BCD4;

            --subject-approved-border: #4CAF50; /* Verde para aprobadas */
            --subject-blocked-border: #FFC107; /* Amarillo para bloqueadas */
            --subject-active-border: #2196F3; /* Azul para activas */
            --subject-text-color: #333;
            --subject-icon-color: #555;
            --tooltip-bg: #333;
            --tooltip-text: #fff;
        }

        /* Estilos generales */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-page);
            color: var(--subject-text-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* Encabezado */
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #6dd5ed, #2193b0); /* Degradado atractivo */
            color: white;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 1200px;
            box-sizing: border-box;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .header p {
            font-size: 1.2em;
            font-weight: 300;
            opacity: 0.9;
        }

        /* Sección de estadísticas */
        .stats-section {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 40px;
            width: 90%;
            max-width: 1200px;
        }

        .stat-card {
            background-color: #fff;
            padding: 20px 30px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            flex: 1;
            min-width: 200px;
            max-width: 300px;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            margin-top: 0;
            color: #555;
            font-size: 1.1em;
            font-weight: 600;
        }

        .stat-card p {
            font-size: 2.2em;
            font-weight: 700;
            color: #2193b0;
            margin: 0;
        }

        /* Contenedor principal de la malla */
        .curriculum-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
            width: 100%;
            max-width: 1400px; /* Ajustado para permitir más contenido horizontal */
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* Contenedor de unidad (Preuniversitaria, Básica, Profesional, Titulación) */
        .unit-container {
            background-color: #fff; /* Se sobrescribe por la variable de unidad */
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            box-sizing: border-box;
        }

        .unit-title {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 3px solid; /* Color se define por JS */
            width: 100%;
            color: #333; /* Se sobrescribe por la variable de unidad */
        }

        /* Contenedor de semestres dentro de una unidad */
        .semesters-wrapper {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            width: 100%;
        }

        /* Contenedor de cada semestre */
        .semester-container {
            background-color: #f0f0f0; /* Se sobrescribe por la variable de semestre */
            border-radius: 12px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1; /* Para que los semestres dentro de una unidad tengan el mismo tamaño */
            min-width: 280px; /* Ancho mínimo para responsividad */
            max-width: 350px; /* Ancho máximo para mantener estética */
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        .semester-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .semester-title {
            font-size: 1.6em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            color: #333; /* Se sobrescribe por la variable de semestre */
            padding-bottom: 8px;
            border-bottom: 2px solid; /* Color se define por JS */
            width: 100%;
        }

        /* Contenedor de materias dentro de un semestre */
        .subjects-grid {
            display: flex;
            flex-direction: column; /* Materias en columna */
            gap: 15px;
            width: 100%;
        }

        /* Tarjeta de materia/módulo */
        .subject-card, .module-card {
            background-color: #eee; /* Se sobrescribe por la variable de materia/módulo */
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative; /* Para el tooltip */
            border: 2px solid transparent; /* Borde para estados */
        }

        .subject-card:hover, .module-card:hover:not(.blocked) {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        .subject-card.approved, .module-card.approved {
            border-color: var(--subject-approved-border);
            background-color: #e8f5e9; /* Un verde muy suave para aprobadas */
        }

        .subject-card.blocked, .module-card.blocked {
            cursor: not-allowed;
            opacity: 0.6;
            border-color: var(--subject-blocked-border);
            background-color: #fffde7; /* Un amarillo muy suave para bloqueadas */
        }

        .subject-card.active, .module-card.active {
            border-color: var(--subject-active-border);
            background-color: #e3f2fd; /* Un azul muy suave para activas */
        }

        .subject-icon, .module-icon {
            font-size: 1.8em;
            line-height: 1;
            color: var(--subject-icon-color);
        }

        .subject-info, .module-info {
            flex-grow: 1;
        }

        .subject-name, .module-name {
            font-weight: 600;
            font-size: 0.95em;
            margin-bottom: 3px;
            color: var(--subject-text-color);
        }

        .subject-credits, .module-credits {
            font-size: 0.8em;
            color: #666;
        }

        /* Tooltip */
        .tooltip {
            visibility: hidden;
            background-color: var(--tooltip-bg);
            color: var(--tooltip-text);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 120%; /* Posicionar encima de la tarjeta */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            width: 200px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            font-size: 0.85em;
            line-height: 1.4;
        }

        .subject-card.blocked:hover .tooltip, .module-card.blocked:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--tooltip-bg) transparent transparent transparent;
        }

        /* Sección de Módulos */
        .modules-section {
            background-color: var(--module-bg-soft);
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            box-sizing: border-box;
            margin-top: 40px;
        }

        .modules-title {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 3px solid #666;
            width: 100%;
            color: #333;
        }

        .module-unit-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 25px;
            width: 100%;
        }

        .module-unit {
            background-color: #fff; /* Se sobrescribe por la variable de módulo */
            border-radius: 12px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            min-width: 280px;
            max-width: 400px; /* Ajuste para módulos */
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        .module-unit:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .module-unit-title {
            font-size: 1.6em;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            color: #333; /* Se sobrescribe por la variable de módulo */
            padding-bottom: 8px;
            border-bottom: 2px solid; /* Color se define por JS */
            width: 100%;
        }

        .module-levels-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }

        /* Responsividad */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            .header p {
                font-size: 1em;
            }
            .stat-card {
                min-width: 150px;
                padding: 15px;
            }
            .stat-card p {
                font-size: 1.8em;
            }
            .unit-title, .modules-title {
                font-size: 1.8em;
            }
            .semester-title, .module-unit-title {
                font-size: 1.4em;
            }
            .subject-card, .module-card {
                padding: 12px;
            }
            .subject-icon, .module-icon {
                font-size: 1.5em;
            }
            .subject-name, .module-name {
                font-size: 0.9em;
            }
            .semester-container, .module-unit {
                min-width: unset;
                width: 100%;
            }
            .semesters-wrapper, .module-unit-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1>LICENCIATURA EN TURISMO EN LÍNEA</h1>
        <p>Malla Curricular Interactiva</p>
    </header>

    <section class="stats-section">
        <div class="stat-card">
            <h3>Total Asignaturas</h3>
            <p id="total-subjects">57</p>
        </div>
        <div class="stat-card">
            <h3>Total Módulos</h3>
            <p id="total-modules">9</p>
        </div>
        <div class="stat-card">
            <h3>Asignaturas Aprobadas</h3>
            <p id="approved-subjects">0</p>
        </div>
        <div class="stat-card">
            <h3>Módulos Aprobados</h3>
            <p id="approved-modules">0</p>
        </div>
        <div class="stat-card">
            <h3>Créditos Totales</h3>
            <p id="total-credits">0.00</p>
        </div>
        <div class="stat-card">
            <h3>Créditos Malla</h3>
            <p id="malla-credits">0.00</p>
        </div>
        <div class="stat-card">
            <h3>Créditos Módulos Complementarios</h3>
            <p id="module-credits">0.00</p>
        </div>
    </section>

    <main class="curriculum-container" id="curriculum-container"></main>

    <script>
        // Definición de la estructura de la malla curricular y módulos
        const curriculumData = [
            {
                unit: "UNIDAD PREUNIVERSITARIA",
                id: "unidad-preuniversitaria",
                colorScheme: {
                    background: "#E1F3FB",
                    title: "#1AB4E8"
                },
                semesters: [
                    {
                        name: "PRE",
                        id: "pre",
                        colorScheme: {
                            background: "#E0F7FA",
                            title: "#008BA3",
                            subjectColors: ["#E0F7FA", "#B2EBF2", "#80DEEA", "#4DD0E1", "#26C6DA", "#00BCD4"]
                        },
                        subjects: [
                            { name: "Epistemología del Turismo", id: "epistemologia-turismo", credits: 0, icon: "🧠", prerequisites: [] },
                            { name: "Introducción a la Comunicación Académica", id: "intro-comunicacion-academica", credits: 0, icon: "✍️", prerequisites: [] },
                            { name: "Pensamiento Computacional", id: "pensamiento-computacional", credits: 0, icon: "💻", prerequisites: [] }
                        ]
                    }
                ]
            },
            {
                unit: "UNIDAD BÁSICA",
                id: "unidad-basica",
                colorScheme: {
                    background: "#E6F9E8",
                    title: "#1ACB6C"
                },
                semesters: [
                    {
                        name: "1ER SEMESTRE",
                        id: "semestre-1",
                        colorScheme: {
                            background: "#E8F5E9",
                            title: "#1B5E20",
                            subjectColors: ["#E8F5E9", "#C8E6C9", "#A5D6A7", "#81C784", "#66BB6A", "#43A047"]
                        },
                        subjects: [
                            { name: "Matemática Financiera", id: "matematica-financiera", credits: 1.6666, icon: "💰", prerequisites: ["pensamiento-computacional"] },
                            { name: "Tecnología Aplicada", id: "tecnologia-aplicada", credits: 3.33, icon: "🛠️", prerequisites: ["pensamiento-computacional"] },
                            { name: "Teoría Del Turismo", id: "teoria-del-turismo", credits: 3.33, icon: "📚", prerequisites: ["epistemologia-turismo"] },
                            { name: "Administración", id: "administracion", credits: 3.33, icon: "📋", prerequisites: ["intro-comunicacion-academica"] },
                            { name: "Metodología De La Investigación Científica", id: "metodologia-investigacion-cientifica", credits: 1.67, icon: "🔬", prerequisites: ["intro-comunicacion-academica"] },
                            { name: "Técnicas De Operación Turística", id: "tecnicas-operacion-turistica", credits: 3.33, icon: "🧳", prerequisites: ["epistemologia-turismo"] }
                        ]
                    },
                    {
                        name: "2DO SEMESTRE",
                        id: "semestre-2",
                        colorScheme: {
                            background: "#FFF3E0",
                            title: "#EF6C00",
                            subjectColors: ["#FFF3E0", "#FFE0B2", "#FFCC80", "#FFB74D", "#FFA726", "#FF9800"]
                        },
                        subjects: [
                            { name: "Cosmos Histórico", id: "cosmos-historico", credits: 3.33, icon: "🏺", prerequisites: ["teoria-del-turismo"] },
                            { name: "Bioentorno Turístico", id: "bioentorno-turistico", credits: 3.33, icon: "🌱", prerequisites: ["teoria-del-turismo"] },
                            { name: "Técnicas De Guiar", id: "tecnicas-de-guiar", credits: 3.33, icon: "🎤", prerequisites: ["tecnicas-operacion-turistica"] },
                            { name: "Hospitalidad", id: "hospitalidad", credits: 3.33, icon: "🤝", prerequisites: ["administracion"] },
                            { name: "Estadística Descriptiva Administrativa", id: "estadistica-descriptiva-administrativa", credits: 1.6666, icon: "📊", prerequisites: ["matematica-financiera", "tecnologia-aplicada"] },
                            { name: "Comunicación Oral Y Escrita", id: "comunicacion-oral-escrita", credits: 1.67, icon: "🗣️", prerequisites: ["metodologia-investigacion-cientifica"] }
                        ]
                    },
                    {
                        name: "3ER SEMESTRE",
                        id: "semestre-3",
                        colorScheme: {
                            background: "#F3E5F5",
                            title: "#6A1B9A",
                            subjectColors: ["#F3E5F5", "#E1BEE7", "#CE93D8", "#BA68C8", "#AB47BC", "#9C27B0"]
                        },
                        subjects: [
                            { name: "Comunidad Y Turismo", id: "comunidad-y-turismo", credits: 1.6666, icon: "🏘️", prerequisites: ["hospitalidad"] },
                            { name: "Gastronomía Ancestral Y Patrimonio", id: "gastronomia-ancestral-patrimonio", credits: 3.33, icon: "🍲", prerequisites: ["hospitalidad"] },
                            { name: "Gestión Operativa De Áreas Protegidas", id: "gestion-operativa-areas-protegidas", credits: 3.33, icon: "🏞️", prerequisites: ["tecnicas-de-guiar"] },
                            { name: "Manifestaciones Plásticas Turísticas", id: "manifestaciones-plasticas-turisticas", credits: 3.33, icon: "🎨", prerequisites: ["cosmos-historico", "comunicacion-oral-escrita"] },
                            { name: "Prospección Intercultural Ecuatoriana", id: "prospeccion-intercultural-ecuatoriana", credits: 1.6666, icon: "🌎", prerequisites: ["cosmos-historico"] },
                            { name: "Contabilidad General", id: "contabilidad-general", credits: 3.33, icon: "📒", prerequisites: ["estadistica-descriptiva-administrativa"] }
                        ]
                    }
                ]
            },
            {
                unit: "UNIDAD PROFESIONAL",
                id: "unidad-profesional",
                colorScheme: {
                    background: "#FFFBEB",
                    title: "#FFD150"
                },
                semesters: [
                    {
                        name: "4TO SEMESTRE",
                        id: "semestre-4",
                        colorScheme: {
                            background: "#FCE4EC",
                            title: "#AD1457",
                            subjectColors: ["#FCE4EC", "#F8BBD0", "#F48FB1", "#F06292", "#EC407A", "#E91E63"]
                        },
                        subjects: [
                            { name: "Finanzas De Corto Plazo", id: "finanzas-corto-plazo", credits: 3.33, icon: "📈", prerequisites: ["contabilidad-general"] },
                            { name: "Gestión Territorial En Turismo", id: "gestion-territorial-turismo", credits: 3.33, icon: "🌍", prerequisites: ["gestion-operativa-areas-protegidas", "manifestaciones-plasticas-turisticas"] },
                            { name: "Gestión Del Talento Humano Por Competencias", id: "gestion-talento-humano", credits: 2.5, icon: "👥", prerequisites: ["contabilidad-general"] },
                            { name: "Folklore", id: "folklore", credits: 1.6666, icon: "🎭", prerequisites: ["manifestaciones-plasticas-turisticas", "prospeccion-intercultural-ecuatoriana"] },
                            { name: "Codificación Turística", id: "codificacion-turistica", credits: 3.33, icon: "🧩", prerequisites: ["gestion-operativa-areas-protegidas"] },
                            { name: "Campismo Y Recreación Turística", id: "campismo-recreacion-turistica", credits: 1.6666, icon: "⛺", prerequisites: ["gastronomia-ancestral-patrimonio", "comunidad-y-turismo"] }
                        ]
                    },
                    {
                        name: "5TO SEMESTRE",
                        id: "semestre-5",
                        colorScheme: {
                            background: "#FFFDE7",
                            title: "#FBC02D",
                            subjectColors: ["#FFFDE7", "#FFF9C4", "#FFF59D", "#FFF176", "#FFEE58", "#FFEB3B"]
                        },
                        subjects: [
                            { name: "Arqueología", id: "arqueologia", credits: 1.6666, icon: "🗿", prerequisites: ["folklore"] },
                            { name: "Microeconomía", id: "microeconomia", credits: 3.33, icon: "🏦", prerequisites: ["finanzas-corto-plazo"] },
                            { name: "Iconografía Turística", id: "iconografia-turistica", credits: 1.6666, icon: "🖼️", prerequisites: ["campismo-recreacion-turistica"] },
                            { name: "Operación De Tours", id: "operacion-de-tours", credits: 3.33, icon: "🚍", prerequisites: ["codificacion-turistica", "gestion-territorial-turismo"] },
                            { name: "Fomento Y Regulaciones A La Actividad Turística", id: "fomento-regulaciones-turistica", credits: 3.33, icon: "⚖️", prerequisites: ["gestion-talento-humano"] },
                            {
                                name: "Desarrollo Del Turismo Sostenible", id: "desarrollo-turismo-sostenible", credits: 5, icon: "♻️",
                                prerequisites: [
                                    "matematica-financiera", "tecnologia-aplicada", "teoria-del-turismo", "administracion",
                                    "metodologia-investigacion-cientifica", "tecnicas-operacion-turistica", "cosmos-historico",
                                    "bioentorno-turistico", "tecnicas-de-guiar", "hospitalidad", "estadistica-descriptiva-administrativa",
                                    "comunicacion-oral-escrita", "comunidad-y-turismo", "gastronomia-ancestral-patrimonio",
                                    "gestion-operativa-areas-protegidas", "manifestaciones-plasticas-turisticas",
                                    "prospeccion-intercultural-ecuatoriana", "contabilidad-general", "finanzas-corto-plazo",
                                    "gestion-territorial-turismo", "gestion-talento-humano", "folklore", "codificacion-turistica",
                                    "campismo-recreacion-turistica"
                                ]
                            }
                        ]
                    },
                    {
                        name: "6TO SEMESTRE",
                        id: "semestre-6",
                        colorScheme: {
                            background: "#FFEBEE",
                            title: "#C62828",
                            subjectColors: ["#FFEBEE", "#FFCDD2", "#EF9A9A", "#E57373", "#EF5350", "#F44336"]
                        },
                        subjects: [
                            {
                                name: "Planificación Turística", id: "planificacion-turistica", credits: 5, icon: "🗓️",
                                prerequisites: [
                                    "matematica-financiera", "tecnologia-aplicada", "teoria-del-turismo", "administracion",
                                    "metodologia-investigacion-cientifica", "tecnicas-operacion-turistica", "cosmos-historico",
                                    "bioentorno-turistico", "tecnicas-de-guiar", "hospitalidad", "estadistica-descriptiva-administrativa",
                                    "comunicacion-oral-escrita", "comunidad-y-turismo", "gastronomia-ancestral-patrimonio",
                                    "gestion-operativa-areas-protegidas", "manifestaciones-plasticas-turisticas",
                                    "prospeccion-intercultural-ecuatoriana", "contabilidad-general", "finanzas-corto-plazo",
                                    "gestion-territorial-turismo", "gestion-talento-humano", "folklore", "codificacion-turistica",
                                    "campismo-recreacion-turistica", "arqueologia", "microeconomia", "iconografia-turistica",
                                    "operacion-de-tours", "fomento-regulaciones-turistica", "desarrollo-turismo-sostenible"
                                ]
                            },
                            { name: "Gestión De La Innovación Y Emprendimiento", id: "gestion-innovacion-emprendimiento", credits: 3.33, icon: "🚀", prerequisites: ["fomento-regulaciones-turistica"] },
                            { name: "Animación Turística", id: "animacion-turistica", credits: 3.33, icon: "🎬", prerequisites: ["iconografia-turistica"] },
                            { name: "Rice - Organización De Eventos", id: "rice-organizacion-eventos", credits: 1.6666, icon: "📅", prerequisites: ["desarrollo-turismo-sostenible"] },
                            { name: "Sistemas De Registros Turísticos / Sabre Y Amadeus", id: "sistemas-registros-turisticos", credits: 1.6666, icon: "🧾", prerequisites: ["operacion-de-tours"] },
                            { name: "Macroeconomía", id: "macroeconomia", credits: 3.33, icon: "🌐", prerequisites: ["microeconomia"] }
                        ]
                    },
                    {
                        name: "7MO SEMESTRE",
                        id: "semestre-7",
                        colorScheme: {
                            background: "#E8F5E9",
                            title: "#1B5E20",
                            subjectColors: ["#E8F5E9", "#C8E6C9", "#A5D6A7", "#81C784", "#66BB6A", "#388E3C"]
                        },
                        subjects: [
                            {
                                name: "Patrimonio", id: "patrimonio", credits: 5, icon: "🏛️",
                                prerequisites: [
                                    "planificacion-turistica", "gestion-innovacion-emprendimiento", "animacion-turistica",
                                    "rice-organizacion-eventos", "sistemas-registros-turisticos", "macroeconomia"
                                ]
                            },
                            { name: "Gestión De Calidad Y La Productividad", id: "gestion-calidad-productividad", credits: 3.33, icon: "✅", prerequisites: ["gestion-innovacion-emprendimiento"] },
                            { name: "Operación De Alimentos Y Bebidas", id: "operacion-alimentos-bebidas", credits: 1.6666, icon: "🍽️", prerequisites: ["animacion-turistica"] },
                            { name: "Operación Hotelera", id: "operacion-hotelera", credits: 3.33, icon: "🏨", prerequisites: ["sistemas-registros-turisticos"] },
                            { name: "Sociología Del Turismo", id: "sociologia-turismo", credits: 3.33, icon: "👨‍👩‍👧‍👦", prerequisites: ["animacion-turistica"] },
                            { name: "Tendencias Turísticas", id: "tendencias-turisticas", credits: 1.6666, icon: "📈", prerequisites: ["macroeconomia"] }
                        ]
                    }
                ]
            },
            {
                unit: "UNIDAD DE TITULACIÓN",
                id: "unidad-titulacion",
                colorScheme: {
                    background: "#FFEAEA",
                    title: "#FF9292"
                },
                semesters: [
                    {
                        name: "8VO SEMESTRE",
                        id: "semestre-8",
                        colorScheme: {
                            background: "#E3F2FD",
                            title: "#0D47A1",
                            subjectColors: ["#E3F2FD", "#BBDEFB", "#90CAF9", "#64B5F6", "#42A5F5", "#1976D2"]
                        },
                        subjects: [
                            { name: "Formulación Y Evaluación De Proyectos", id: "formulacion-evaluacion-proyectos", credits: 3.33, icon: "📐", prerequisites: ["gestion-calidad-productividad"] },
                            {
                                name: "Integración Regional Turística", id: "integracion-regional-turistica", credits: 5, icon: "🤝",
                                prerequisites: [
                                    "patrimonio", "gestion-calidad-productividad", "operacion-alimentos-bebidas",
                                    "operacion-hotelera", "sociologia-turismo", "tendencias-turisticas"
                                ]
                            },
                            { name: "Estrategias Comerciales Turísticas", id: "estrategias-comerciales-turisticas", credits: 3.33, icon: "🎯", prerequisites: ["tendencias-turisticas"] },
                            {
                                name: "Redacción Del Trabajo De Titulación", id: "redaccion-trabajo-titulacion", credits: 1.6666, icon: "📖",
                                prerequisites: [
                                    "patrimonio", "gestion-calidad-productividad", "operacion-alimentos-bebidas",
                                    "operacion-hotelera", "sociologia-turismo", "tendencias-turisticas"
                                ]
                            },
                            { name: "Apreciación Del Arte Y La Cultura", id: "apreciacion-arte-cultura", credits: 1.6666, icon: "🖌️", prerequisites: ["patrimonio"] },
                            { name: "Turismo Y Gobernanza", id: "turismo-gobernanza", credits: 3.33, icon: "🏛️", prerequisites: ["operacion-alimentos-bebidas", "sociologia-turismo"] }
                        ]
                    },
                    {
                        name: "9NO SEMESTRE",
                        id: "semestre-9",
                        colorScheme: {
                            background: "#FAFAFA",
                            title: "#424242",
                            subjectColors: ["#FAFAFA", "#F5F5F5", "#EEEEEE", "#E0E0E0", "#BDBDBD", "#757575"]
                        },
                        subjects: [
                            {
                                name: "Gestión Integral De Destinos Turísticos", id: "gestion-integral-destinos-turisticos", credits: 5, icon: "🌟",
                                prerequisites: [
                                    "formulacion-evaluacion-proyectos", "integracion-regional-turistica",
                                    "estrategias-comerciales-turisticas", "redaccion-trabajo-titulacion",
                                    "apreciacion-arte-cultura", "turismo-gobernanza"
                                ]
                            },
                            { name: "Técnicas De Negociación Y Comunicación Para El Turismo", id: "tecnicas-negociacion-comunicacion", credits: 3.3333, icon: "🤝🗣️", prerequisites: ["estrategias-comerciales-turisticas"] },
                            { name: "Realidad Nacional Y Geopolítica", id: "realidad-nacional-geopolitica", credits: 1.67, icon: "🌏", prerequisites: ["turismo-gobernanza"] },
                            { name: "Trabajo De Titulación", id: "trabajo-titulacion", credits: 3.33, icon: "🎓", prerequisites: ["redaccion-trabajo-titulacion"] },
                            { name: "Contratación Pública", id: "contratacion-publica", credits: 3.33, icon: "📝", prerequisites: ["formulacion-evaluacion-proyectos"] },
                            { name: "Liderazgo", id: "liderazgo", credits: 1.6666, icon: "👑", prerequisites: ["apreciacion-arte-cultura"] }
                        ]
                    }
                ]
            }
        ];

        const modulesData = [
            {
                unit: "INGLÉS",
                id: "modulo-ingles",
                colorScheme: {
                    background: "#E0F7FA",
                    title: "#006064",
                    levelColors: ["#E0F2F7", "#B3E5F4", "#80DAF0", "#4DCFE8", "#1AC4DF", "#0099B3", "#007980"]
                },
                levels: [
                    { name: "Nivel -A1", id: "ingles-a1-minus", credits: 2.08, icon: "🔴🏆", prerequisites: [] },
                    { name: "Nivel A1", id: "ingles-a1", credits: 2.08, icon: "🟠🏆", prerequisites: ["ingles-a1-minus"] },
                    { name: "Nivel A2", id: "ingles-a2", credits: 2.08, icon: "🟡🏆", prerequisites: ["ingles-a1"] },
                    { name: "Nivel B1", id: "ingles-b1", credits: 2.08, icon: "🟢🏆", prerequisites: ["ingles-a2"] },
                    { name: "Nivel B2", id: "ingles-b2", credits: 2.08, icon: "🔵🏆", prerequisites: ["ingles-b1"] },
                    { name: "Nivel C1", id: "ingles-c1", credits: 2.08, icon: "🟣🏆", prerequisites: ["ingles-b2"] },
                    { name: "Nivel C2", id: "ingles-c2", credits: 2.08, icon: "🟤🏆", prerequisites: ["ingles-c1"] }
                ]
            },
            {
                unit: "COMPUTACIÓN",
                id: "modulo-computacion",
                colorScheme: {
                    background: "#F3E5F5",
                    title: "#6A1B9A",
                    levelColors: ["#F3E5F5", "#E1BEE7", "#CE93D8", "#BA68C8", "#AB47BC"]
                },
                levels: [
                    { name: "Nivel 1: Windows - Word - Internet", id: "comp-windows-word-internet", credits: 8, icon: "🪟📄🌐", prerequisites: [] },
                    { name: "Nivel 2: Excel – Power Point", id: "comp-excel-powerpoint", credits: 8, icon: "📊📽️", prerequisites: ["comp-windows-word-internet"] }
                ]
            }
        ];

        // Objeto para almacenar el estado de aprobación de cada materia/módulo
        let approvedState = {};
        // Objeto para un mapeo rápido de todas las materias/módulos por ID
        const allCourses = {};

        // Función para inicializar allCourses y contar totales
        function initializeCourses() {
            let totalSubjectsCount = 0;
            curriculumData.forEach(unit => {
                unit.semesters.forEach(semester => {
                    semester.subjects.forEach(subject => {
                        allCourses[subject.id] = { ...subject, type: 'malla' };
                        totalSubjectsCount++;
                    });
                });
            });

            let totalModulesCount = 0;
            modulesData.forEach(moduleUnit => {
                moduleUnit.levels.forEach(level => {
                    allCourses[level.id] = { ...level, type: 'modulo' };
                    totalModulesCount++;
                });
            });

            document.getElementById('total-subjects').textContent = totalSubjectsCount;
            document.getElementById('total-modules').textContent = totalModulesCount;
        }

        // Cargar el progreso desde localStorage
        function loadProgress() {
            const savedProgress = localStorage.getItem('curriculumProgress');
            if (savedProgress) {
                approvedState = JSON.parse(savedProgress);
            } else {
                // Inicializar todas las materias/módulos como no aprobadas si no hay progreso guardado
                Object.keys(allCourses).forEach(id => {
                    approvedState[id] = false;
                });
            }
        }

        // Guardar el progreso en localStorage
        function saveProgress() {
            localStorage.setItem('curriculumProgress', JSON.stringify(approvedState));
        }

        // Verificar si una materia/módulo está bloqueada (sus prerrequisitos no están aprobados)
        function isBlocked(courseId) {
            const course = allCourses[courseId];
            if (!course) return true; // Si la materia no existe, se considera bloqueada

            for (const prereqId of course.prerequisites) {
                if (!approvedState[prereqId]) {
                    return true;
                }
            }
            return false;
        }

        // Obtener los prerrequisitos faltantes para una materia/módulo
        function getMissingPrerequisites(courseId) {
            const course = allCourses[courseId];
            if (!course || !course.prerequisites) return [];

            const missing = [];
            for (const prereqId of course.prerequisites) {
                if (!approvedState[prereqId]) {
                    missing.push(allCourses[prereqId].name);
                }
            }
            return missing;
        }

        // Renderizar la malla curricular y los módulos
        function renderCurriculum() {
            const container = document.getElementById('curriculum-container');
            container.innerHTML = ''; // Limpiar el contenedor antes de renderizar

            // Renderizar Unidades de la Malla
            curriculumData.forEach(unit => {
                const unitDiv = document.createElement('div');
                unitDiv.className = 'unit-container';
                unitDiv.style.backgroundColor = unit.colorScheme.background;
                unitDiv.innerHTML = `
                    <h2 class="unit-title" style="color: ${unit.colorScheme.title}; border-color: ${unit.colorScheme.title};">${unit.unit}</h2>
                    <div class="semesters-wrapper"></div>
                `;
                const semestersWrapper = unitDiv.querySelector('.semesters-wrapper');

                unit.semesters.forEach((semester, semIndex) => {
                    const semesterDiv = document.createElement('div');
                    semesterDiv.className = 'semester-container';
                    semesterDiv.style.backgroundColor = semester.colorScheme.background;
                    semesterDiv.innerHTML = `
                        <h3 class="semester-title" style="color: ${semester.colorScheme.title}; border-color: ${semester.colorScheme.title};">${semester.name}</h3>
                        <div class="subjects-grid"></div>
                    `;
                    const subjectsGrid = semesterDiv.querySelector('.subjects-grid');

                    semester.subjects.forEach((subject, subIndex) => {
                        const subjectCard = document.createElement('div');
                        subjectCard.className = 'subject-card';
                        subjectCard.id = `card-${subject.id}`;
                        subjectCard.dataset.id = subject.id;
                        subjectCard.style.backgroundColor = semester.colorScheme.subjectColors[subIndex % semester.colorScheme.subjectColors.length];

                        const blocked = isBlocked(subject.id);
                        if (blocked) {
                            subjectCard.classList.add('blocked');
                            const missingPrereqs = getMissingPrerequisites(subject.id);
                            const tooltipContent = missingPrereqs.length > 0
                                ? `Falta(n): ${missingPrereqs.join(', ')}`
                                : 'Bloqueada'; // En caso de que no haya prerrequisitos pero esté bloqueada por alguna razón
                            subjectCard.innerHTML += `<div class="tooltip">${tooltipContent}</div>`;
                        } else {
                            subjectCard.classList.add('active'); // Puede ser clicable
                        }

                        if (approvedState[subject.id]) {
                            subjectCard.classList.add('approved');
                            subjectCard.classList.remove('active'); // No activa si ya está aprobada
                        }

                        subjectCard.innerHTML = `
                            <span class="subject-icon">${subject.icon}</span>
                            <div class="subject-info">
                                <div class="subject-name">${subject.name}</div>
                                <div class="subject-credits">Créditos: ${subject.credits}</div>
                            </div>
                            ${blocked ? `<div class="tooltip">${getMissingPrerequisites(subject.id).join(', ')}</div>` : ''}
                        `;
                        subjectsGrid.appendChild(subjectCard);
                    });
                    semestersWrapper.appendChild(semesterDiv);
                });
                container.appendChild(unitDiv);
            });

            // Renderizar Sección de Módulos
            const modulesSection = document.createElement('section');
            modulesSection.className = 'modules-section';
            modulesSection.innerHTML = `
                <h2 class="modules-title">MÓDULOS</h2>
                <div class="module-unit-container"></div>
            `;
            const moduleUnitContainer = modulesSection.querySelector('.module-unit-container');

            modulesData.forEach(moduleUnit => {
                const moduleUnitDiv = document.createElement('div');
                moduleUnitDiv.className = 'module-unit';
                moduleUnitDiv.style.backgroundColor = moduleUnit.colorScheme.background;
                moduleUnitDiv.innerHTML = `
                    <h3 class="module-unit-title" style="color: ${moduleUnit.colorScheme.title}; border-color: ${moduleUnit.colorScheme.title};">${moduleUnit.unit}</h3>
                    <div class="module-levels-grid"></div>
                `;
                const moduleLevelsGrid = moduleUnitDiv.querySelector('.module-levels-grid');

                moduleUnit.levels.forEach((level, levelIndex) => {
                    const moduleCard = document.createElement('div');
                    moduleCard.className = 'module-card';
                    moduleCard.id = `card-${level.id}`;
                    moduleCard.dataset.id = level.id;
                    moduleCard.style.backgroundColor = moduleUnit.colorScheme.levelColors[levelIndex % moduleUnit.colorScheme.levelColors.length];

                    const blocked = isBlocked(level.id);
                    if (blocked) {
                        moduleCard.classList.add('blocked');
                        const missingPrereqs = getMissingPrerequisites(level.id);
                        const tooltipContent = missingPrereqs.length > 0
                            ? `Falta(n): ${missingPrereqs.join(', ')}`
                            : 'Bloqueada';
                        moduleCard.innerHTML += `<div class="tooltip">${tooltipContent}</div>`;
                    } else {
                        moduleCard.classList.add('active');
                    }

                    if (approvedState[level.id]) {
                        moduleCard.classList.add('approved');
                        moduleCard.classList.remove('active');
                    }

                    moduleCard.innerHTML = `
                        <span class="module-icon">${level.icon}</span>
                        <div class="module-info">
                            <div class="module-name">${level.name}</div>
                            <div class="module-credits">Créditos: ${level.credits}</div>
                        </div>
                        ${blocked ? `<div class="tooltip">${getMissingPrerequisites(level.id).join(', ')}</div>` : ''}
                    `;
                    moduleLevelsGrid.appendChild(moduleCard);
                });
                moduleUnitContainer.appendChild(moduleUnitDiv);
            });
            container.appendChild(modulesSection);

            // Añadir event listeners después de que todos los elementos estén en el DOM
            addEventListeners();
            updateStatistics();
        }

        // Añadir event listeners a las tarjetas de materia/módulo
        function addEventListeners() {
            document.querySelectorAll('.subject-card, .module-card').forEach(card => {
                card.onclick = (event) => {
                    const courseId = event.currentTarget.dataset.id;
                    if (isBlocked(courseId)) {
                        // Si está bloqueada, no hacer nada (el tooltip ya muestra la info)
                        return;
                    }

                    // Toggle el estado de aprobación
                    approvedState[courseId] = !approvedState[courseId];
                    saveProgress();
                    reEvaluateAllCourses(); // Re-evaluar todas las materias después de un cambio
                };
            });
        }

        // Re-evaluar el estado de todas las materias/módulos
        function reEvaluateAllCourses() {
            // Primero, desmarcar cualquier materia aprobada si su prerrequisito se desmarcó
            // Iterar en un bucle hasta que no haya más cambios, para manejar dependencias en cadena
            let changed = true;
            while (changed) {
                changed = false;
                for (const id in allCourses) {
                    if (approvedState[id] && isBlocked(id)) {
                        approvedState[id] = false; // Desmarcar si los prerrequisitos ya no se cumplen
                        changed = true;
                    }
                }
            }
            renderCurriculum(); // Volver a renderizar para actualizar la UI
        }

        // Actualizar las estadísticas
        function updateStatistics() {
            let approvedSubjectsCount = 0;
            let approvedModulesCount = 0; // Nuevo contador para módulos
            let mallaCredits = 0;
            let moduleCredits = 0;

            for (const id in approvedState) {
                if (approvedState[id]) {
                    if (allCourses[id].type === 'malla') {
                        approvedSubjectsCount++;
                        mallaCredits += allCourses[id].credits;
                    } else if (allCourses[id].type === 'modulo') {
                        approvedModulesCount++; // Incrementar contador de módulos
                        moduleCredits += allCourses[id].credits;
                    }
                }
            }

            document.getElementById('approved-subjects').textContent = approvedSubjectsCount;
            document.getElementById('approved-modules').textContent = approvedModulesCount; // Actualizar el nuevo elemento
            document.getElementById('malla-credits').textContent = mallaCredits.toFixed(2);
            document.getElementById('module-credits').textContent = moduleCredits.toFixed(2);
            document.getElementById('total-credits').textContent = (mallaCredits + moduleCredits).toFixed(2);
        }

        // Inicializar la aplicación al cargar la página
        window.onload = () => {
            initializeCourses();
            loadProgress();
            reEvaluateAllCourses(); // Evaluar el estado inicial de bloqueo/desbloqueo
        };
    </script>
</body>
</html>
